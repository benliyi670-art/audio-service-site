<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专业配音服务 - 低预算出好配音</title>
    <style>
        /* 原 CSS + 分页样式保持 */
        .close-btn {
            padding: 10px 15px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        .close-btn:hover {
            background: #c82333;
        }
        @media (max-width: 768px) {
            .player-content {
                flex-direction: column;
            }
            .close-btn {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header><!-- 原 header --></header>
        <div class="search-section"><!-- 原 search --></div>
        <div class="content">
            <div class="stats"><!-- 原 stats --></div>
            <div class="teachers-grid" id="teachersGrid"></div>
            <div class="pagination" id="teachersPagination"></div>
            <div class="no-results" id="noResults" style="display: none;"><!-- 原 no-results --></div>
        </div>
    </div>

    <div class="player-bar" id="playerBar">
        <div class="player-content">
            <div class="player-info"><!-- 原 info --></div>
            <div class="player-controls"><!-- 原 controls --></div>
            <button class="close-btn" id="closePlayer">X</button>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        let teachersData = [];
        let currentCategory = 'all';
        let currentSearchTerm = '';
        let currentTeacherPage = 1;
        let currentAudioPages = {};

        const isMobile = window.innerWidth <= 768;
        const teachersPerPage = isMobile ? 5 : 10;
        const audioPerPage = isMobile ? 3 : 5;

        const audioPlayer = document.getElementById('audioPlayer');
        // ... 原其他变量 ...

        async function init() {
            await loadData();
            renderTeachers();
            updateStats();
            setupEventListeners();
            setupPlayer();
        }

        async function loadData() {
            try {
                const response = await fetch('/audios.json'); // 上传的完整 JSON
                const json = await response.json();
                teachersData = [];
                for (const catName in json.categories) {
                    const cat = json.categories[catName];
                    cat.teachers.forEach(teacher => {
                        const teacherEntry = {
                            id: teacher.id,
                            name: teacher.name,
                            category: catName,
                            description: teacher.description || '',
                            audios: teacher.audios.map(audio => ({
                                title: audio.title,
                                style: audio.style || '',
                                url: audio.url.replace('http://', 'https://'),
                                duration: 'N/A'
                            }))
                        };
                        teachersData.push(teacherEntry);
                    });
                }
                console.log('Loaded ' + teachersData.length + ' teachers');
            } catch (error) {
                console.error('加载 JSON 失败:', error);
            }
        }

        // ... 原 renderTeachers, 但添加 style 到 audio-title 如 `${audio.title} (${audio.style})`

        function renderAudios(teacher) {
            // 原, 但 title 显示 `${audio.title} (${audio.style})` 如果 style 非空
            const audioTitle = audio.style ? `${audio.title} (${audio.style})` : audio.title;
            // 在 audio-item span.audio-title 使用 audioTitle
        }

        // 原 changeTeacherPage, changeAudioPage

        function setupPlayer() {
            // 原
            document.getElementById('closePlayer').addEventListener('click', () => {
                playerBar.classList.remove('active');
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
            });
        }

        // 原其他函数

        init();
    </script>
</body>
</html>